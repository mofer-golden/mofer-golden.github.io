"use strict";(self.webpackChunkgolden=self.webpackChunkgolden||[]).push([[156],{4156:(Ut,Se,v)=>{v.r(Se),v.d(Se,{AppRedarkiaModule:()=>V});var w=v(6895),te=v(8996),e=v(4650),ce=v(2289),Pe=v(4004),be=v(7579),Be=v(6063);class Ve extends be.x{constructor(n=1/0,t=1/0,i=Be.l){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){const{isStopped:t,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:r,_windowTime:a}=this;t||(i.push(n),!s&&i.push(r.now()+a)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(n),{_infiniteTimeWindow:i,_buffer:s}=this,r=s.slice();for(let a=0;a<r.length&&!n.closed;a+=i?1:2)n.next(r[a]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){const{_bufferSize:n,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:s}=this,r=(s?1:2)*n;if(n<1/0&&r<i.length&&i.splice(0,i.length-r),!s){const a=t.now();let l=0;for(let d=1;d<i.length&&i[d]<=a;d+=2)l=d;l&&i.splice(0,l+1)}}}var Le=v(3099),Te=v(5830);class q{constructor(){}setUser(n){this.user=n}getUser(){return this.user}getUserId(){return this.user.id}getAttendeeId(){return this.user.attendee.id}}q.\u0275fac=function(n){return new(n||q)},q.\u0275prov=e.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"});var ye=v(7215),le=v(7392),Re=v(6338),Ee=v(4859),xe=v(3683),ne=v(3267);function He(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(2);return e.KtG(s.toggle())}),e.TgZ(1,"mat-icon",11),e._uU(2,"menu"),e.qZA()()}}const je=function(){return["/redarkia/events"]},Ge=function(){return["/redarkia/matches"]},we=function(){return["/redarkia/business-rounds"]};class L{constructor(n,t,i,s){this.breakpointObserver=n,this.apiService=t,this.dataService=i,this.authService=s,this.isHandset$=this.breakpointObserver.observe(ce.u3.Handset).pipe((0,Pe.U)(r=>r.matches),function Ye(o,n,t){let i,s=!1;return o&&"object"==typeof o?({bufferSize:i=1/0,windowTime:n=1/0,refCount:s=!1,scheduler:t}=o):i=o??1/0,(0,Le.B)({connector:()=>new Ve(i,n,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}()),this.user={}}ngOnInit(){this.getProfile()}getProfile(){this.apiService.getProfile().subscribe({next:n=>{console.log(n),this.dataService.setUser(n.data),this.user=n.data},error:n=>{console.error(n),this.authService.signout()}})}logout(){this.authService.signout()}}L.\u0275fac=function(n){return new(n||L)(e.Y36(ce.Yg),e.Y36(Te.s),e.Y36(q),e.Y36(ye.e))},L.\u0275cmp=e.Xpm({type:L,selectors:[["app-navigation"]],decls:30,vars:22,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],[3,"click"],[1,"navbar-nav"],[1,"nav-item","item-hover"],[1,"nav-link","px-3",3,"routerLink"],[1,"bg-redarkia"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],["src","assets/redarkia.png","alt","logo","height","40"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(n,t){1&n&&(e.TgZ(0,"mat-sidenav-container",0)(1,"mat-sidenav",1,2),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.TgZ(6,"mat-toolbar")(7,"mat-icon",3),e.NdJ("click",function(){return t.logout()}),e._uU(8,"exit_to_app"),e.qZA()(),e.TgZ(9,"mat-nav-list")(10,"ul",4)(11,"li",5)(12,"a",6),e._uU(13," Eventos "),e.qZA()(),e.TgZ(14,"li",5)(15,"a",6),e._uU(16," Matchs "),e.qZA()(),e.TgZ(17,"li",5)(18,"a",6),e._uU(19," Rondas de negocios "),e.qZA()(),e.TgZ(20,"li",5)(21,"a",6),e._uU(22),e.qZA()()()()(),e.TgZ(23,"mat-sidenav-content")(24,"mat-toolbar",7),e.YNc(25,He,3,0,"button",8),e.ALo(26,"async"),e.TgZ(27,"span"),e._UZ(28,"img",9),e.qZA()(),e._UZ(29,"router-outlet"),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("mode",e.lcZ(4,12,t.isHandset$)?"over":"side")("opened",!1===e.lcZ(5,14,t.isHandset$)),e.uIk("role",e.lcZ(3,10,t.isHandset$)?"dialog":"navigation"),e.xp6(11),e.Q6J("routerLink",e.DdM(18,je)),e.xp6(3),e.Q6J("routerLink",e.DdM(19,Ge)),e.xp6(3),e.Q6J("routerLink",e.DdM(20,we)),e.xp6(3),e.Q6J("routerLink",e.DdM(21,we)),e.xp6(1),e.AsE(" ",null==t.user?null:t.user.name," (",null==t.user?null:t.user.id,") "),e.xp6(3),e.Q6J("ngIf",e.lcZ(26,16,t.isHandset$)))},dependencies:[w.O5,te.lC,te.rH,le.Hw,Re.Hk,Ee.RK,xe.Ye,ne.JX,ne.TM,ne.Rh,w.Ov],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:150px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.bg-redarkia[_ngcontent-%COMP%]{background:rgb(254,0,110);background:linear-gradient(9deg,rgb(190,19,92) 0%,rgba(212,130,217,.86) 30%,rgba(240,150,245,.8603816526610644) 30%,rgb(47,140,157) 100%)}.item-hover[_ngcontent-%COMP%]:hover{background-color:#a8a8a8;color:#011d1f}"]});class Y{}Y.\u0275fac=function(n){return new(n||Y)},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["app-main"]],decls:1,vars:0,template:function(n,t){1&n&&e._UZ(0,"app-navigation")},dependencies:[L]});var T=v(5938),R=v(4006),Je=v(2340),$e=v(529);class F{constructor(n,t,i){this.api=n,this.http=t,this.authService=i,this.baseUrl="",this.baseUrl=Je.N.apiUrl}getEvents(){return this.api.insertHead(),this.http.get(`${this.baseUrl}/events`,this.api.httpOptions)}getEvent(n){return this.api.insertHead(),this.http.get(`${this.baseUrl}/events/${n}`,this.api.httpOptions)}enrollEvent(n,t){return this.api.insertHead(),this.http.post(`${this.baseUrl}/attendee/events/${t}`,n,this.api.httpOptions)}getMatches(){return this.api.insertHead(),this.http.get(`${this.baseUrl}/attendee/match/pending`,this.api.httpOptions)}getScheduleBusinessRounds(n){return this.api.insertHead(),this.http.post(`${this.baseUrl}/attendee/business-round/${n}`,{},this.api.httpOptions)}acceptScheduleBusinessRound(n,t){return this.api.insertHead(),this.http.put(`${this.baseUrl}/attendee/business-round-accept/${t}`,n,this.api.httpOptions)}getBusinessRounds(){return this.api.insertHead(),this.http.get(`${this.baseUrl}/attendee/business-round`,this.api.httpOptions)}updateBusinessRound(n,t){return this.api.insertHead(),this.http.put(`${this.baseUrl}/attendee/business-round/${t}`,n,this.api.httpOptions)}}F.\u0275fac=function(n){return new(n||F)(e.LFG(Te.s),e.LFG($e.eN),e.LFG(ye.e))},F.\u0275prov=e.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"});var H=v(7331);function ze(o,n){if(1&o&&(e.TgZ(0,"mat-chip-option",14),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function We(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-chip-option",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.changeEconomicSector1(r))}),e._uU(1),e.qZA()}if(2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Ke(o,n){if(1&o&&(e.TgZ(0,"mat-chip-option",14),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Xe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-chip-option",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.changeEconomicSector2(r))}),e._uU(1),e.qZA()}if(2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function et(o,n){if(1&o&&(e.TgZ(0,"mat-chip-option",14),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}class j{constructor(n,t,i,s){this.fb=n,this.queryService=t,this.dialogRef=i,this.data=s,this.area_interests=[],this.economic_sectors=[],this.economic_sectors1=[],this.economic_sectors2=[],this.enrollForm=this.fb.group({area_interest_id:[0,R.kI.required],economic_sector_id:[0,R.kI.required],economic_sector_otherr:[[],R.kI.required]})}ngOnInit(){this.getEvent()}getEvent(){this.queryService.getEvent(this.data.eventId).subscribe({next:n=>{this.event=n.data.event||{},this.area_interests=n.data.area_interests||[],this.economic_sectors=n.data.economic_sectors||[]},error:n=>{console.log(n)}})}changeEconomicSector1(n){this.economic_sectors1=n.children||[]}changeEconomicSector2(n){this.economic_sectors2=n.children||[]}enrollEvent(){if(this.enrollForm.invalid)return void this.enrollForm.markAllAsTouched();const n={...this.enrollForm.value,event_id:this.event.id,economic_sector_other:JSON.stringify(this.enrollForm.value.economic_sector_otherr)};this.queryService.enrollEvent(n,this.event.id).subscribe({next:t=>{this.dialogRef.close(t)},error:t=>{console.log(t)}})}}function oe(o,n,t,i){return new(t||(t=Promise))(function(r,a){function l(h){try{c(i.next(h))}catch(b){a(b)}}function d(h){try{c(i.throw(h))}catch(b){a(b)}}function c(h){h.done?r(h.value):function s(r){return r instanceof t?r:new t(function(a){a(r)})}(h.value).then(l,d)}c((i=i.apply(o,n||[])).next())})}j.\u0275fac=function(n){return new(n||j)(e.Y36(R.qu),e.Y36(F),e.Y36(T.so),e.Y36(T.WI))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-form-inscription"]],decls:31,vars:6,consts:[["mat-dialog-title",""],[1,"mat-typography",3,"formGroup"],[1,"text-center"],[1,"m-0","p-0"],["aria-label","Fish selection","formControlName","area_interest_id"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Fish selection"],[3,"value","click",4,"ngFor","ngForOf"],["aria-label","Fish selection","formControlName","economic_sector_id"],["aria-label","Fish selection","multiple","","formControlName","economic_sector_otherr"],["align","end"],[1,"btn-group","w-100"],["mat-dialog-close","",1,"btn","btn-outline-warning"],[1,"btn","btn-outline-success",3,"click"],[3,"value"],[3,"value","click"]],template:function(n,t){1&n&&(e.TgZ(0,"h2",0),e._uU(1,"Inscribirme a Evento"),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"p",2),e._uU(4,"Selecciona tus intereses y sectores econ\xf3micos"),e.qZA(),e.TgZ(5,"p",3),e._uU(6,"Area de interes"),e.qZA(),e.TgZ(7,"mat-chip-listbox",4),e.YNc(8,ze,2,2,"mat-chip-option",5),e.qZA(),e.TgZ(9,"p",3),e._uU(10,"Mi sector Economico"),e.qZA(),e.TgZ(11,"mat-chip-listbox",6),e.YNc(12,We,2,2,"mat-chip-option",7),e.qZA(),e.TgZ(13,"p",3),e._uU(14,"Categorias"),e.qZA(),e.TgZ(15,"mat-chip-listbox",8),e.YNc(16,Ke,2,2,"mat-chip-option",5),e.qZA(),e.TgZ(17,"p",3),e._uU(18,"Sectores Economicos de Interes"),e.qZA(),e.TgZ(19,"mat-chip-listbox",6),e.YNc(20,Xe,2,2,"mat-chip-option",7),e.qZA(),e.TgZ(21,"p",3),e._uU(22,"Categorias (m\xe1s de una)"),e.qZA(),e.TgZ(23,"mat-chip-listbox",9),e.YNc(24,et,2,2,"mat-chip-option",5),e.qZA()(),e.TgZ(25,"mat-dialog-actions",10)(26,"div",11)(27,"button",12),e._uU(28," Cancelar "),e.qZA(),e.TgZ(29,"button",13),e.NdJ("click",function(){return t.enrollEvent()}),e._uU(30," Inscribir "),e.qZA()()()),2&n&&(e.xp6(2),e.Q6J("formGroup",t.enrollForm),e.xp6(6),e.Q6J("ngForOf",t.area_interests),e.xp6(4),e.Q6J("ngForOf",t.economic_sectors),e.xp6(4),e.Q6J("ngForOf",t.economic_sectors1),e.xp6(4),e.Q6J("ngForOf",t.economic_sectors),e.xp6(4),e.Q6J("ngForOf",t.economic_sectors2))},dependencies:[w.sg,R.JJ,R.JL,R.sg,R.u,T.ZT,T.uh,T.xY,T.H8,H.z2,H.iO]});class O extends be.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(n){const{hasError:t,_hasValue:i,_value:s,thrownError:r,isStopped:a,_isComplete:l}=this;t?n.error(r):(a||l)&&(i&&n.next(s),n.complete())}next(n){this.isStopped||(this._value=n,this._hasValue=!0)}complete(){const{_hasValue:n,_value:t,_isComplete:i}=this;i||(this._isComplete=!0,n&&super.next(t),super.complete())}}var Qe=v(1135);const nt=["video"],ot=["canvas"],it=["resultsPanel"],ue="assets/wasm/index.js",G="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@1.6.6/wasm/index.js",Ie={audio:!1,video:!0},he={lineWidth:1,strokeStyle:"green",fillStyle:"#55f02880"},pe={font:"15px serif",strokeStyle:"#fff0",fillStyle:"#ff0000"},N={src:"",fps:30,vibrate:300,decode:"utf-8",isBeep:!0,constraints:Ie,canvasStyles:[he,pe]};var se=()=>"zbarWasm"in window;const p=(o,n,t=null)=>{t?o.error(t):o.next(n),o.complete()},me=(o=!1)=>{if(!1===o)return;const n=new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV");n.oncanplaythrough=()=>{const t=n.play();t&&t.catch(i=>{})}},x=(o,n)=>{const t=n.split(".");for(let i=0;i<t.length;i++){let s=t[i];if(!o||!o.hasOwnProperty(s))return!1;o=o[s]}return!0},Ne=(o,n,t,i)=>{let s,r,a=n.width,l=n.height,d=a/l,c=parseInt(getComputedStyle(n).width),h=parseInt(getComputedStyle(n).height),b=c/h;t.innerHTML="",d>b?(s=c/a,r=c/d/l):(r=h/l,s=h*d/a);for(let _=0;_<o.length;_++){const C=o[_];let A=document.createElement("canvas"),E=A.getContext("2d",{willReadFrequently:!0}),S={},f=[],y=[],I=0,K=0;if(2===i.length&&i[1].font){let m=i[1].font.replace(/[^0-9]/g,"");/[0-9]/g.test(m)&&(I=parseFloat(m),K=(s||1)*I,Number.isNaN(K)&&(K=I))}const X=C.points;for(let m=0;m<X.length;m++){const re=x(X,`${m}.x`)?X[m].x:0,ae=x(X,`${m}.y`)?X[m].y:0;S[`x${m+1}`]=re,S[`y${m+1}`]=ae,f.push(re),y.push(ae)}let ge=Math.max(...f),U=Math.min(...f),ve=Math.max(...y),M=Math.min(...y);A.setAttribute("class","qrcode-polygon"),d>b?(A.style.top=M*r+.5*(h-c/d)+"px",A.style.left=U*s+"px",A.width=(ge-U)*s,A.height=(ve-M)*s):(A.style.top=M*r+"px",A.style.left=U*s+.5*(c-h*d)+"px",A.width=(ge-U)*r,A.height=(ve-M)*r);for(const m in i[0])E[m]=i[0][m];const Ae=[];for(let m=0;m<f.length;m++)Ae.push((S[`x${m+1}`]-U)*r),Ae.push((S[`y${m+1}`]-M)*s);const ee=Ae.slice(0);for(E.beginPath(),E.moveTo(ee.shift(),ee.shift());ee.length;)E.lineTo(ee.shift(),ee.shift());if(E.closePath(),E.fill(),E.stroke(),I){const m=document.createElement("div");m.setAttribute("class","qrcode-tooltip-temp"),m.innerText=C.value,m.style.maxWidth=(a>window.innerWidth?.9*window.innerWidth:a)+"px",m.style.borderRadius=`clamp(1px, ${s*I-10}px, 3px)`,m.style.paddingBlock=`clamp(1px, ${s*I-10}px, 3px)`,m.style.paddingInline=`clamp(2.5px, ${s*I-6}px, 10px)`;const re=`<svg xmlns="http://www.w3.org/2000/svg" width="${K}" height="${K}" viewBox="0 0 512 512"><rect x="128" y="128" width="336" height="336" rx="57" ry="57"></rect><path d="M383.5,128l.5-24a56.16,56.16,0,0,0-56-56H112a64.19,64.19,0,0,0-64,64V328a56.16,56.16,0,0,0,56,56h24"></path></svg>`,ae=(new DOMParser).parseFromString(re,"application/xml"),Ce=m.ownerDocument.importNode(ae.documentElement,!0);Ce.style.marginLeft=`clamp(1px, ${s*I-10}px, 3px)`,m.appendChild(Ce),Ce.addEventListener("click",()=>window.navigator.clipboard.writeText(C.value)),m.addEventListener("click",()=>window.navigator.clipboard.writeText(C.value));const D=document.createElement("div");D.setAttribute("class","qrcode-tooltip"),D.appendChild(m),r=h/l,s=h*d/a,D.style.fontSize=s*I+"px",D.style.top=M*r+"px",D.style.left=U*s+.5*(c-h*d)+"px",D.style.width=(ge-U)*r+"px",D.style.height=(ve-M)*r+"px";const k=document.createElement("span");if(k.innerText=C.value,k.style.top=M*r+-20*r+"px",k.style.left=U*s+.5*(c-h*d)+"px",k.style.fontSize=s*I+"px",2==i.length&&i[1]&&i[1].font){const Zt=i[1].font.split(" ")[1];k.style.fontFamily=Zt,k.style.color=i[1].fillStyle}t&&(t.appendChild(D),t.appendChild(k))}t&&t.appendChild(A)}},Ze=(o,n)=>new Promise((t,i)=>o.toBlob(s=>t(s),n)),Ue=(o=[],n,t,i,s=new O)=>(Me(o,t,i).then(r=>{Promise.all(Object.assign([],r).map(a=>((o,n)=>{let t=x(n,"decode")?n.decode:N.decode,i=x(n,"canvasStyles")&&2===n.canvasStyles.length?n.canvasStyles:[he,pe],s=x(n,"isBeep")?n.isBeep:N.isBeep;return new Promise((r,a)=>{const l=new FileReader;l.onload=()=>{const d={name:o.name,file:o,url:URL.createObjectURL(o)},c=new Image;c.setAttribute("crossOrigin","anonymous"),c.onload=()=>oe(void 0,void 0,void 0,function*(){const h=document.createElement("canvas");h.width=c.naturalWidth||c.width,h.height=c.naturalHeight||c.height;const b=h.getContext("2d");b.drawImage(c,0,0,h.width,h.height);const _=b.getImageData(0,0,h.width,h.height);if(se()){const C=yield zbarWasm.scanImageData(_);if(C&&C.length){C.forEach(f=>f.value=f.decode(t&&t.toLocaleLowerCase())),((o,n,t)=>{let i=n.getContext("2d",{willReadFrequently:!0});for(let s=0;s<o.length;s++){const r=o[s];let a={},l=[],d=[],c=0;if(2===t.length){const S=t[1]&&t[1].font&&t[1].font.split(" ")[0];let f=S&&S.replace(/[^0-9]/g,"");f&&/[0-9]/g.test(f)&&(c=parseFloat(f))}const h=r.points;for(let S=0;S<h.length;S++){const f=x(h,`${S}.x`)?h[S].x:0,y=x(h,`${S}.y`)?h[S].y:0;a[`x${S+1}`]=f,a[`y${S+1}`]=y,l.push(f),d.push(y)}let b=Math.min(...l),_=Math.min(...d);const C=()=>{for(const y in t[0])i[y]=t[0][y];const S=[];for(let y=0;y<l.length;y++)S.push(a[`x${y+1}`]),S.push(a[`y${y+1}`]);const f=S.slice(0);for(i.beginPath(),i.moveTo(f.shift(),f.shift());f.length;)i.lineTo(f.shift(),f.shift());i.closePath(),i.fill(),i.stroke()};let A=document.createElement("canvas");const E=()=>{if(2===t.length){const S=t[1]&&t[1].font&&t[1].font.split(" ")[1];A.height=n.height,A.width=n.width;let f=A.getContext("2d",{willReadFrequently:!0});f.font=c+"px "+S;for(const y in t[1])f[y]=t[1][y];ut(f,r.value,b,_-5)}};C(),E(),i.drawImage(A,0,0)}})(C,h,i);const A=yield Ze(h),E=URL.createObjectURL(A);r(Object.assign({},d,{data:C,url:E,canvas:h,file:(f=A,y=d.name,new File([f],y,{lastModified:(new Date).getTime(),type:f.type}))})),me(s)}else r(Object.assign({},d,{data:C,canvas:h}))}var f,y}),c.src=d.url},l.onerror=d=>a(d),l.readAsDataURL(o)})})(a,n))).then(a=>{p(s,a)}).catch(a=>p(s,null,a))}),s),ut=(o,n,t,i)=>{let s=1.2*o.measureText("M").width,r=n.split("\n");for(var a=0;a<r.length;++a)o.fillText(r[a],t,i),o.strokeText(r[a],t,i),i+=s},Me=(o=[],n=100,t=100)=>{if(o.length&&(n<100||t<100)){const i=[];return new Promise((s,r)=>{for(const a of o){const l=new Image,d=new FileReader;d.onload=function(c){l.onload=function(){const h=document.createElement("canvas"),b=h.getContext("2d"),_=Math.round(l.width*(n/100)),C=Math.round(l.height*(n/100));h.width=_,h.height=C,b.drawImage(l,0,0,_,C),h.toBlob(A=>{const E=new File([A],a.name,{type:a.type});i.push(E),o.length===i.length&&s(i)},a.type,t/100)},l.src=c.target.result},d.onerror=c=>r(c),d.readAsDataURL(a)}})}return Promise.resolve(o)},De=o=>{Object.assign([],o.childNodes).forEach(n=>o.removeChild(n))},_e=(o,n)=>{o.style.width=n.offsetWidth+"px",o.style.height=n.offsetHeight+"px"},ke=o=>{o&&pt()&&window&&window.navigator&&window.navigator.vibrate(o)},pt=()=>{const o=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(o)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(o.substr(0,4))||/^((?!chrome|android).)*safari/i.test(o))};class Z{loadFiles(n=[],t,i){const s=new O;return Me(n,t,i).then(r=>{Promise.all(Object.assign([],r).map(a=>this.readAsDataURL(a))).then(a=>p(s,a)).catch(a=>p(s,null,a))}),s}loadFilesToScan(n=[],t,i,s){return Ue(n,t,i,s)}readAsDataURL(n){return new Promise((t,i)=>{const s=new FileReader;s.onload=()=>{const r={name:n.name,file:n,url:URL.createObjectURL(n)};t(r)},s.onerror=r=>i(r),s.readAsDataURL(n)})}}Z.\u0275fac=function(n){return new(n||Z)},Z.\u0275prov=e.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z.ngInjectableDef=(0,e.Ez6)({factory:function(){return new Z},token:Z,providedIn:"root"});let _t=(()=>{class o{constructor(t,i){this.renderer=t,this.elementRef=i,this.event=new e.vpe,this.src=N.src,this.fps=N.fps,this.vibrate=N.vibrate,this.decode=N.decode,this.isBeep=N.isBeep,this.config=N,this.constraints=N.constraints,this.canvasStyles=[he,pe],this.isStart=!1,this.isPause=!1,this.isLoading=!1,this.isTorch=!1,this.data=new Qe.X([]),this.devices=new Qe.X([]),this.deviceIndexActive=0,this.dataForResize=[],this.ready=new O,this.STATUS={startON:()=>this.isStart=!0,pauseON:()=>this.isPause=!0,loadingON:()=>this.isLoading=!0,startOFF:()=>this.isStart=!1,pauseOFF:()=>this.isPause=!1,loadingOFF:()=>this.isLoading=!1,torchOFF:()=>this.isTorch=!1}}ngOnInit(){this.overrideConfig(),((o=new O,n)=>{let t=0;const i=(s=!1)=>{const r=()=>{let d;try{const c=()=>{clearTimeout(d),se()?setTimeout(()=>p(o,!0)):d=setTimeout(()=>c())};setTimeout(()=>c()),setTimeout(()=>clearTimeout(d),3e3)}catch{clearTimeout(d)}},a=document.querySelectorAll(`script[src="${G}"]`),l=document.querySelectorAll('script[src="https://cdn.jsdelivr.net/npm/ngx-scanner-qrcode@latest/wasm/index.js"]');if(a.length||l.length)r();else{const d=document.querySelectorAll(`script[src="${ue}"]`);if(1===d.length)r();else if(d.forEach(c=>c.remove()),n){const c=n.createElement("script");n.setAttribute(c,"src",s?G:ue),n.setAttribute(c,"type","text/javascript"),n.setAttribute(c,"async",""),n.appendChild(document.head,c),c.onload=()=>r(),c.onerror=()=>{t<2?(document.head.removeChild(c),i(!0)):p(o,!1,G)},t+=1}else{const c=document.createElement("script");c.setAttribute("src",s?G:ue),c.setAttribute("type","text/javascript"),c.setAttribute("async",""),document.head.appendChild(c),c.onload=()=>r(),c.onerror=()=>{t<2?(document.head.removeChild(c),i(!0)):p(o,!1,G)},t+=1}}};return i(),o})(this.ready,this.renderer).subscribe(()=>{this.src&&this.loadImage(this.src),this.resize()})}start(t){const i=new O;return this.isStart?p(i,!1):this.safariWebRTC(i,t),i}stop(){this.STATUS.pauseOFF(),this.STATUS.startOFF(),this.STATUS.torchOFF(),this.STATUS.loadingOFF();const t=new O;try{clearTimeout(this.rAF_ID),this.video.nativeElement.srcObject.getTracks().forEach(i=>{i.stop(),p(t,!0)}),this.dataForResize=[],(o=>{o.getContext("2d",{willReadFrequently:!0}).clearRect(0,0,o.width,o.height)})(this.canvas.nativeElement),De(this.resultsPanel.nativeElement)}catch(i){p(t,!1,i)}return t}play(){const t=new O;return this.isPause?(this.video.nativeElement.play(),this.STATUS.pauseOFF(),this.requestAnimationFrame(),p(t,!0)):p(t,!1),t}pause(){const t=new O;return this.isStart?(clearTimeout(this.rAF_ID),this.video.nativeElement.pause(),this.STATUS.pauseON(),p(t,!0)):p(t,!1),t}playDevice(t,i=new O){const s=this.getConstraints();switch(!0){case"null"===t||"undefined"===t||!t:stop(),this.stop(),p(i,!1);break;case t&&(!this.isStart||!s||s.deviceId!==t):stop(),this.stop(),this.STATUS.loadingON(),this.deviceIndexActive=this.devices.value.findIndex(l=>l.deviceId===t);const a=Object.assign({},this.constraints,{audio:!1,video:Object.assign({deviceId:t},this.constraints.video)});navigator.mediaDevices.getUserMedia(a).then(l=>{this.video.nativeElement.srcObject=l,this.video.nativeElement.onloadedmetadata=()=>{this.video.nativeElement.play(),this.requestAnimationFrame(),p(i,!0),this.STATUS.startON(),this.STATUS.loadingOFF()}}).catch(l=>{this.eventEmit(!1),p(i,!1,l),this.STATUS.startOFF(),this.STATUS.loadingOFF()});break;default:p(i,!1),this.STATUS.loadingOFF()}return i}loadImage(t){const i=new O;this.STATUS.startOFF(),this.STATUS.loadingON();const s=new Image;return s.setAttribute("crossOrigin","anonymous"),s.onload=()=>{se()&&this.drawImage(s,r=>{p(i,r),this.STATUS.startOFF(),this.STATUS.loadingOFF()})},s.src=t,i}torcher(){const t=this.applyConstraints({advanced:[{torch:this.isTorch}]});return t.subscribe(()=>!1,()=>this.isTorch=!this.isTorch),t}applyConstraints(t,i=0){const s=new O;if(this.isStart){const r=this.video.nativeElement.srcObject;if(null===i&&void 0===i&&Number.isNaN(i))p(s,!1,"Please check again deviceIndex");else{const a=r.getVideoTracks()[i];new window.ImageCapture(a).getPhotoCapabilities().then(()=>oe(this,void 0,void 0,function*(){yield a.applyConstraints(t),_e(this.video.nativeElement,this.canvas.nativeElement),p(s,this.getConstraints())})).catch(d=>{switch(d&&d.name){case"NotFoundError":case"DevicesNotFoundError":p(s,!1,"Required track is missing");break;case"NotReadableError":case"TrackStartError":p(s,!1,"Webcam or mic are already in use");break;case"OverconstrainedError":case"ConstraintNotSatisfiedError":p(s,!1,"Constraints can not be satisfied by avb. devices");break;case"NotAllowedError":case"PermissionDeniedError":p(s,!1,"Permission denied in browser");break;case"TypeError":p(s,!1,"Empty constraints object");break;default:p(s,!1,d)}})}}else p(s,!1,"Please start the scanner");return s}getConstraints(t=0){const i=this.video.nativeElement.srcObject,s=i&&i.getVideoTracks()[t];return s&&s.getConstraints()}download(t=`ngx_scanner_qrcode_${Date.now()}.png`,i,s){const r=new O;return(()=>{oe(this,void 0,void 0,function*(){const d=((o,n)=>new File([o],n,{lastModified:(new Date).getTime(),type:o.type}))(yield Ze(this.canvas.nativeElement),t);Ue([d],this.config,i,s,r).subscribe(c=>{c.forEach(h=>{if(h.data&&h.data.length){const b=document.createElement("a");b.href=h.url,b.download=h.name,b.click(),b.remove()}})})})})(),r}resize(){window.addEventListener("resize",()=>{Ne(this.dataForResize,this.canvas.nativeElement,this.resultsPanel.nativeElement,this.canvasStyles),_e(this.video.nativeElement,this.canvas.nativeElement)})}overrideConfig(){x(this.config,"src")&&(this.src=this.config.src),x(this.config,"fps")&&(this.fps=this.config.fps),x(this.config,"vibrate")&&(this.vibrate=this.config.vibrate),x(this.config,"decode")&&(this.decode=this.config.decode),x(this.config,"isBeep")&&(this.isBeep=this.config.isBeep),x(this.config,"constraints")&&(this.constraints=((o,n,t)=>{if(n&&Object.keys(n[o]).length){for(const i in t){const s=JSON.parse(JSON.stringify(Object.assign({},n[o],{[i]:t[i]})));n[o]=n[o].hasOwnProperty(i)?n[o]:s}return n[o]}return t})("constraints",this.config,Ie)),x(this.config,"canvasStyles")&&2===this.config.canvasStyles.length&&(this.canvasStyles=this.config.canvasStyles)}safariWebRTC(t,i){this.STATUS.startOFF(),this.STATUS.loadingON(),navigator.mediaDevices.getUserMedia(this.constraints).then(s=>{s.getTracks().forEach(r=>r.stop()),this.loadAllDevices(t,i)}).catch(s=>{p(t,!1,s),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}loadAllDevices(t,i){navigator.mediaDevices.enumerateDevices().then(s=>{let r=s.filter(a=>"videoinput"==a.kind);this.devices.next(r),r.length>0?(p(t,r),i?i(r):this.playDevice(r[0].deviceId)):(p(t,!1,"No camera detected."),this.STATUS.startOFF(),this.STATUS.loadingOFF())}).catch(s=>{p(t,!1,s),this.STATUS.startOFF(),this.STATUS.loadingOFF()})}drawImage(t,i=(()=>{})){return oe(this,void 0,void 0,function*(){const s=this.canvas.nativeElement,r=s.getContext("2d",{willReadFrequently:!0});t instanceof HTMLImageElement&&(s.width=t.naturalWidth,s.height=t.naturalHeight,t.style.visibility="",this.video.nativeElement.style.visibility="hidden",this.renderer.setStyle(this.elementRef.nativeElement,"width",s.width+"px"),this.renderer.setStyle(this.elementRef.nativeElement,"maxWidth","100%"),this.renderer.setStyle(this.elementRef.nativeElement,"display","inline-block")),t instanceof HTMLVideoElement&&(s.width=t.videoWidth,s.height=t.videoHeight,t.style.visibility="",this.canvas.nativeElement.style.visibility="hidden"),_e(this.video.nativeElement,s),r.clearRect(0,0,s.width,s.height),r.drawImage(t,0,0,s.width,s.height);const a=r.getImageData(0,0,s.width,s.height),l=yield zbarWasm.scanImageData(a);if(l&&l.length){l.forEach(c=>c.value=c.decode(this.decode&&this.decode.toLocaleLowerCase())),Ne(l,Object.freeze(this.canvas.nativeElement),this.resultsPanel.nativeElement,this.canvasStyles);const d=()=>{this.eventEmit(l),this.dataForResize=l};t instanceof HTMLImageElement&&(i(!0),d(),ke(this.vibrate),me(this.isBeep)),t instanceof HTMLVideoElement&&(d(),ke(this.vibrate),me(this.isBeep))}else i(!1),De(this.resultsPanel.nativeElement),this.dataForResize=[]})}eventEmit(t=!1){!1!==t&&this.data.next(t||[]),!1!==t&&this.event.emit(t||[])}requestAnimationFrame(t=100){try{clearTimeout(this.rAF_ID),this.rAF_ID=setTimeout(()=>{this.video.nativeElement.readyState===this.video.nativeElement.HAVE_ENOUGH_DATA&&(t=0,se()&&this.drawImage(this.video.nativeElement),this.isStart&&!this.isPause&&this.requestAnimationFrame(t))},t||this.fps)}catch{clearTimeout(this.rAF_ID)}}get isReady(){return this.ready}ngOnDestroy(){this.pause()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.Qsj),e.Y36(e.SBq))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ngx-scanner-qrcode"]],viewQuery:function(t,i){if(1&t&&(e.Gf(nt,5),e.Gf(ot,5),e.Gf(it,5)),2&t){let s;e.iGM(s=e.CRH())&&(i.video=s.first),e.iGM(s=e.CRH())&&(i.canvas=s.first),e.iGM(s=e.CRH())&&(i.resultsPanel=s.first)}},hostAttrs:[1,"ngx-scanner-qrcode"],inputs:{src:"src",fps:"fps",vibrate:"vibrate",decode:"decode",isBeep:"isBeep",config:"config",constraints:"constraints",canvasStyles:"canvasStyles"},outputs:{event:"event"},exportAs:["scanner"],decls:6,vars:0,consts:[[1,"origin-overlay"],["resultsPanel",""],[1,"origin-canvas"],["canvas",""],["playsinline","",1,"origin-video"],["video",""]],template:function(t,i){1&t&&e._UZ(0,"div",0,1)(2,"canvas",2,3)(4,"video",4,5)},styles:[".ngx-scanner-qrcode{display:block;position:relative}.origin-overlay{width:100%;position:absolute}.origin-overlay span{z-index:2;text-align:left;position:absolute}.origin-overlay .qrcode-polygon{z-index:1;position:absolute}.origin-canvas{width:100%;position:absolute}.origin-video{width:100%;background-color:#262626}.qrcode-tooltip{z-index:3;position:absolute}.qrcode-tooltip:hover .qrcode-tooltip-temp{display:block;position:absolute;cursor:copy}.qrcode-tooltip:hover .qrcode-tooltip-temp:active{color:#afafaf}.qrcode-tooltip .qrcode-tooltip-temp{bottom:0;left:50%;color:#fff;text-align:left;display:none;width:-moz-max-content;width:max-content;word-wrap:break-word;transform:translate(-50%);transform-style:preserve-3d;background-color:#000000d0;box-shadow:1px 1px 20px #000000e0}.qrcode-tooltip .qrcode-tooltip-temp svg{cursor:pointer}.qrcode-tooltip .qrcode-tooltip-temp svg rect{fill:none;stroke:#fff;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg path{fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px}.qrcode-tooltip .qrcode-tooltip-temp svg:active path,.qrcode-tooltip .qrcode-tooltip-temp svg:active rect{stroke:#afafaf}"],encapsulation:2}),o})();const u={ScannerQRCode_NONE:0,ScannerQRCode_PARTIAL:1,ScannerQRCode_EAN2:2,ScannerQRCode_EAN5:5,ScannerQRCode_EAN8:8,ScannerQRCode_UPCE:9,ScannerQRCode_ISBN10:10,ScannerQRCode_UPCA:12,ScannerQRCode_EAN13:13,ScannerQRCode_ISBN13:14,ScannerQRCode_COMPOSITE:15,ScannerQRCode_I25:25,ScannerQRCode_DATABAR:34,ScannerQRCode_DATABAR_EXP:35,ScannerQRCode_CODABAR:38,ScannerQRCode_CODE39:39,ScannerQRCode_PDF417:57,ScannerQRCode_QRCODE:64,ScannerQRCode_SQCODE:80,ScannerQRCode_CODE93:93,ScannerQRCode_CODE128:128,ScannerQRCode_SYMBOL:255,ScannerQRCode_ADDON2:512,ScannerQRCode_ADDON5:1280,ScannerQRCode_ADDON:1792};u[u.ScannerQRCode_NONE]="ScannerQRCode_NONE",u[u.ScannerQRCode_PARTIAL]="ScannerQRCode_PARTIAL",u[u.ScannerQRCode_EAN2]="ScannerQRCode_EAN2",u[u.ScannerQRCode_EAN5]="ScannerQRCode_EAN5",u[u.ScannerQRCode_EAN8]="ScannerQRCode_EAN8",u[u.ScannerQRCode_UPCE]="ScannerQRCode_UPCE",u[u.ScannerQRCode_ISBN10]="ScannerQRCode_ISBN10",u[u.ScannerQRCode_UPCA]="ScannerQRCode_UPCA",u[u.ScannerQRCode_EAN13]="ScannerQRCode_EAN13",u[u.ScannerQRCode_ISBN13]="ScannerQRCode_ISBN13",u[u.ScannerQRCode_COMPOSITE]="ScannerQRCode_COMPOSITE",u[u.ScannerQRCode_I25]="ScannerQRCode_I25",u[u.ScannerQRCode_DATABAR]="ScannerQRCode_DATABAR",u[u.ScannerQRCode_DATABAR_EXP]="ScannerQRCode_DATABAR_EXP",u[u.ScannerQRCode_CODABAR]="ScannerQRCode_CODABAR",u[u.ScannerQRCode_CODE39]="ScannerQRCode_CODE39",u[u.ScannerQRCode_PDF417]="ScannerQRCode_PDF417",u[u.ScannerQRCode_QRCODE]="ScannerQRCode_QRCODE",u[u.ScannerQRCode_SQCODE]="ScannerQRCode_SQCODE",u[u.ScannerQRCode_CODE93]="ScannerQRCode_CODE93",u[u.ScannerQRCode_CODE128]="ScannerQRCode_CODE128",u[u.ScannerQRCode_SYMBOL]="ScannerQRCode_SYMBOL",u[u.ScannerQRCode_ADDON2]="ScannerQRCode_ADDON2",u[u.ScannerQRCode_ADDON5]="ScannerQRCode_ADDON5",u[u.ScannerQRCode_ADDON]="ScannerQRCode_ADDON";const g={ScannerQRCode_CFG_ENABLE:0,ScannerQRCode_CFG_ADD_CHECK:1,ScannerQRCode_CFG_EMIT_CHECK:2,ScannerQRCode_CFG_ASCII:3,ScannerQRCode_CFG_BINARY:4,ScannerQRCode_CFG_NUM:5,ScannerQRCode_CFG_MIN_LEN:32,ScannerQRCode_CFG_MAX_LEN:33,ScannerQRCode_CFG_UNCERTAINTY:64,ScannerQRCode_CFG_POSITION:128,ScannerQRCode_CFG_TEST_INVERTED:129,ScannerQRCode_CFG_X_DENSITY:256,ScannerQRCode_CFG_Y_DENSITY:257};g[g.ScannerQRCode_CFG_ENABLE]="ScannerQRCode_CFG_ENABLE",g[g.ScannerQRCode_CFG_ADD_CHECK]="ScannerQRCode_CFG_ADD_CHECK",g[g.ScannerQRCode_CFG_EMIT_CHECK]="ScannerQRCode_CFG_EMIT_CHECK",g[g.ScannerQRCode_CFG_ASCII]="ScannerQRCode_CFG_ASCII",g[g.ScannerQRCode_CFG_BINARY]="ScannerQRCode_CFG_BINARY",g[g.ScannerQRCode_CFG_NUM]="ScannerQRCode_CFG_NUM",g[g.ScannerQRCode_CFG_MIN_LEN]="ScannerQRCode_CFG_MIN_LEN",g[g.ScannerQRCode_CFG_MAX_LEN]="ScannerQRCode_CFG_MAX_LEN",g[g.ScannerQRCode_CFG_UNCERTAINTY]="ScannerQRCode_CFG_UNCERTAINTY",g[g.ScannerQRCode_CFG_POSITION]="ScannerQRCode_CFG_POSITION",g[g.ScannerQRCode_CFG_TEST_INVERTED]="ScannerQRCode_CFG_TEST_INVERTED",g[g.ScannerQRCode_CFG_X_DENSITY]="ScannerQRCode_CFG_X_DENSITY",g[g.ScannerQRCode_CFG_Y_DENSITY]="ScannerQRCode_CFG_Y_DENSITY";const Q={ScannerQRCode_ORIENT_UNKNOWN:-1,ScannerQRCode_ORIENT_UP:0,ScannerQRCode_ORIENT_RIGHT:1,ScannerQRCode_ORIENT_DOWN:2,ScannerQRCode_ORIENT_LEFT:3};Q[Q.ScannerQRCode_ORIENT_UNKNOWN]="ScannerQRCode_ORIENT_UNKNOWN",Q[Q.ScannerQRCode_ORIENT_UP]="ScannerQRCode_ORIENT_UP",Q[Q.ScannerQRCode_ORIENT_RIGHT]="ScannerQRCode_ORIENT_RIGHT",Q[Q.ScannerQRCode_ORIENT_DOWN]="ScannerQRCode_ORIENT_DOWN",Q[Q.ScannerQRCode_ORIENT_LEFT]="ScannerQRCode_ORIENT_LEFT";let gt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Z]}),o})();function vt(o,n){if(1&o&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&o){const t=n.$implicit,i=n.index;e.oxw(2);const s=e.MAs(5);e.Q6J("value",t.deviceId)("selected",i==s.deviceIndexActive),e.xp6(1),e.Oqu(t.label)}}function At(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"select",9,10),e.NdJ("change",function(){e.CHM(t);const s=e.MAs(2);e.oxw();const r=e.MAs(5);return e.KtG(r.playDevice(s.value))}),e.TgZ(3,"option",11),e._uU(4,"Select device"),e.qZA(),e.YNc(5,vt,2,3,"option",12),e.qZA()()}if(2&o){e.oxw();const t=e.MAs(5);e.xp6(3),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",t.devices.value)}}function Ct(o,n){1&o&&(e.TgZ(0,"p"),e._uU(1,"\u231b Loading..."),e.qZA())}function St(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(5);return e.KtG(s.isStart?s.stop():s.start())}),e._uU(1),e.qZA()}if(2&o){e.oxw();const t=e.MAs(5);e.xp6(1),e.Oqu(t.isStart?"Cerrar":"Escanear")}}class J{constructor(n,t){this.dialogRef=n,this.data=t,this.eventId=0}ngOnInit(){}ngAfterViewInit(){}capturedQr(n){console.log(n)}onError(n){console.log(n)}onEvent(n,t){t.stop(),console.log(n);const i=n[0]||null;if(i){const s=i.value;console.log(s);const r=s.split("=");console.log(r),this.eventId=parseInt(r[1]),this.dialogRef.close(this.eventId)}}}function bt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"h2",10),e._uU(4),e.qZA()(),e.TgZ(5,"div",11),e._UZ(6,"img",12),e.qZA(),e.TgZ(7,"div",13)(8,"button",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.enrollEvent(r.id))}),e._uU(9," Inscribe "),e.qZA()()()()}if(2&o){const t=n.$implicit;e.xp6(4),e.Oqu(t.name),e.xp6(2),e.s9C("src",t.banner_header,e.LSH)}}J.\u0275fac=function(n){return new(n||J)(e.Y36(T.so),e.Y36(T.WI))},J.\u0275cmp=e.Xpm({type:J,selectors:[["app-qr-code"]],decls:10,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography"],["class","my-1",4,"ngIf"],[3,"error","event"],["action","scanner"],[4,"ngIf"],["class","btn btn-outline-success w-100",3,"click",4,"ngIf"],["mat-dialog-close","",1,"btn","btn-outline-warning","w-100","mt-1",3,"click"],[1,"my-1"],[1,"form-select","form-select-md",3,"change"],["select1",""],["selected","",3,"value"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],[1,"btn","btn-outline-success","w-100",3,"click"]],template:function(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"h2",0),e._uU(1,"Enfoca el QR"),e.qZA(),e.TgZ(2,"mat-dialog-content",1),e.YNc(3,At,6,2,"div",2),e.TgZ(4,"ngx-scanner-qrcode",3,4),e.NdJ("error",function(r){return t.onError(r)})("event",function(r){e.CHM(i);const a=e.MAs(5);return e.KtG(t.onEvent(r,a))}),e.qZA(),e.YNc(6,Ct,2,0,"p",5),e.YNc(7,St,2,1,"button",6),e.TgZ(8,"button",7),e.NdJ("click",function(){e.CHM(i);const r=e.MAs(5);return e.KtG(r.isStart?r.stop():r.start())}),e._uU(9," Cerrar "),e.qZA()()}if(2&n){const i=e.MAs(5);e.xp6(3),e.Q6J("ngIf",i.isStart),e.xp6(3),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isStart)}},dependencies:[w.sg,w.O5,R.YN,R.Kr,T.ZT,T.uh,T.xY,_t]});class ${constructor(n,t,i){this.fb=n,this.queryService=t,this.dialog=i,this.events=[],this.area_interests=[],this.economic_sectors=[],this.searchForm=this.fb.group({eventId:[0,R.kI.required]})}ngOnInit(){this.getEvents()}getEvents(){this.queryService.getEvents().subscribe({next:n=>{console.log(n),this.events=n.data.events||[],this.area_interests=n.data.area_interests||[],this.economic_sectors=n.data.economic_sectors||[]},error:n=>{console.log(n)}})}searchEvent(){if(this.searchForm.invalid)return void this.searchForm.markAllAsTouched();const n=this.searchForm.value.eventId;isNaN(n)||this.queryService.getEvent(n).subscribe({next:t=>{console.log(t),this.events=t.data.event?[t.data.event]:t.data.events,this.area_interests=t.data.area_interests||[],this.economic_sectors=t.data.economic_sectors||[]},error:t=>{console.log(t)}})}enrollEvent(n){this.dialog.open(j,{width:"500px",disableClose:!0,data:{eventId:n}}).afterClosed().subscribe({next:i=>{console.log(i)}})}qrCode(){this.dialog.open(J,{width:"500px",disableClose:!0,data:{}}).afterClosed().subscribe({next:t=>{console.log(t),t&&this.queryService.getEvent(t).subscribe({next:i=>{console.log(i),this.events=i.data.event?[i.data.event]:i.data.events,this.area_interests=i.data.area_interests||[],this.economic_sectors=i.data.economic_sectors||[]},error:i=>{console.log(i)}})}})}}$.\u0275fac=function(n){return new(n||$)(e.Y36(R.qu),e.Y36(F),e.Y36(T.uw))},$.\u0275cmp=e.Xpm({type:$,selectors:[["app-events"]],decls:10,vars:1,consts:[[1,"p-2"],[1,"row","mb-2"],[1,"col-md-12"],[3,"click"],[1,"col-md-4"],[1,"row"],["class","col-md-3 col-sm-6",4,"ngFor","ngForOf"],[1,"col-md-3","col-sm-6"],[1,"card"],[1,"card-header"],[1,"card-title","m-0"],[1,"card-body","p-1"],[1,"img-fluid",3,"src"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4,"Eventos "),e.TgZ(5,"mat-icon",3),e.NdJ("click",function(){return t.qrCode()}),e._uU(6,"center_focus_strong"),e.qZA()()(),e._UZ(7,"div",4),e.qZA(),e.TgZ(8,"div",5),e.YNc(9,bt,10,2,"div",6),e.qZA()()),2&n&&(e.xp6(9),e.Q6J("ngForOf",t.events))},dependencies:[w.sg,le.Hw]});class P{constructor(n,t,i,s){this.fb=n,this.queryService=t,this.dialogRef=i,this.data=s}ngOnInit(){this.schedule=this.data||{},console.log(this.schedule)}acceptSchedule(n){this.dialogRef.close({res:!0,status:n,scheduleId:this.schedule.id})}}function Tt(o,n){if(1&o&&(e.TgZ(0,"mat-chip")(1,"small"),e._uU(2),e.qZA()()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function yt(o,n){if(1&o&&(e.TgZ(0,"mat-chip")(1,"small"),e._uU(2),e.qZA()()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function Rt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e._uU(3),e.qZA(),e.TgZ(4,"div",6)(5,"p",7),e._uU(6,"Busca"),e.qZA(),e.TgZ(7,"div")(8,"mat-chip-listbox",8),e.YNc(9,Tt,3,1,"mat-chip",9),e.qZA()(),e.TgZ(10,"div")(11,"mat-chip-listbox",8),e.YNc(12,yt,3,1,"mat-chip",9),e.qZA()()(),e.TgZ(13,"div",10)(14,"div",11)(15,"button",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.getScheduleBusinessRounds(r.id))}),e._uU(16,"Ver"),e.qZA(),e.TgZ(17,"button",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.getScheduleBusinessRounds(r.id))}),e._uU(18,"Ronda"),e.qZA()()()()()}if(2&o){const t=n.$implicit;e.xp6(3),e.hij(" ",null==t||null==t.attendee||null==t.attendee.user?null:t.attendee.user.name," "),e.xp6(6),e.Q6J("ngForOf",null==t||null==t.attendee?null:t.attendee.interest_economic_sectors),e.xp6(3),e.Q6J("ngForOf",null==t||null==t.attendee?null:t.attendee.area_interests)}}P.\u0275fac=function(n){return new(n||P)(e.Y36(R.qu),e.Y36(F),e.Y36(T.so),e.Y36(T.WI))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-modal-schedule"]],decls:22,vars:8,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],[1,"btn-group","w-100"],["mat-dialog-close","",1,"btn","btn-outline-warning"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-outline-success",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"h2",0),e._uU(1,"Horario de reuni\xf3n"),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"div"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.qZA()(),e.TgZ(14,"mat-dialog-actions",2)(15,"div",3)(16,"button",4),e._uU(17," Cancelar "),e.qZA(),e.TgZ(18,"button",5),e.NdJ("click",function(){return t.acceptSchedule("rejected")}),e._uU(19," Otro horario "),e.qZA(),e.TgZ(20,"button",6),e.NdJ("click",function(){return t.acceptSchedule("accepted")}),e._uU(21," aceptar horario "),e.qZA()()()),2&n&&(e.xp6(4),e.hij(" fecha: ",e.xi3(5,5,t.data.date,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" hora Inicio: ",t.data.init_time," "),e.xp6(2),e.hij(" hora Fin: ",t.data.end_time," "),e.xp6(2),e.hij(" zona: ",t.data.zone.zone_name," "),e.xp6(2),e.hij(" Mesa: ",t.data.name_table," "))},dependencies:[T.ZT,T.uh,T.xY,T.H8,w.uU]});class z{constructor(n,t){this.queryService=n,this.dialog=t,this.matches=[]}ngOnInit(){this.getMatches()}getMatches(){this.queryService.getMatches().subscribe({next:n=>{console.log(n),this.matches=n.data||[]},error:n=>{console.log(n)}})}getScheduleBusinessRounds(n){this.queryService.getScheduleBusinessRounds(n).subscribe({next:t=>{this.dialog.open(P,{width:"500px",disableClose:!0,data:t.data||{}}).afterClosed().subscribe({next:s=>{console.log(s),s.res?this.acceptScheduleBusinessRound(s.scheduleId,s.status,n):console.log("cancel")}})},error:t=>{console.log(t)}})}acceptScheduleBusinessRound(n,t,i){this.queryService.acceptScheduleBusinessRound({status:t,match_id:i},n).subscribe({next:r=>{"rejected"===t&&this.dialog.open(P,{width:"500px",disableClose:!0,data:r.data||{}}).afterClosed().subscribe({next:l=>{console.log(l),l.res?this.acceptScheduleBusinessRound(l.scheduleId,l.status,i):console.log("cancel")}})},error:r=>{console.log(r)}})}}z.\u0275fac=function(n){return new(n||z)(e.Y36(F),e.Y36(T.uw))},z.\u0275cmp=e.Xpm({type:z,selectors:[["app-matchs"]],decls:3,vars:1,consts:[[1,"p-2"],[1,"row"],["class","col-md-3 col-sm-6",4,"ngFor","ngForOf"],[1,"col-md-3","col-sm-6"],[1,"card","mb-1","h-100"],[1,"card-header"],[1,"card-body","py-1"],[1,"card-title","m-0"],["aria-label","Dog selection"],[4,"ngFor","ngForOf"],[1,"card-footer"],[1,"btn-group","w-100"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Rt,19,3,"div",2),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("ngForOf",t.matches))},dependencies:[w.sg,H.HS,H.z2]});var Et=v(8345);const xt=function(o){return{"background-color":o}};function wt(o,n){if(1&o&&(e.TgZ(0,"mat-chip",13)(1,"small"),e._uU(2),e.qZA()()),2&o){const t=n.$implicit;e.Akn(e.VKq(3,xt,"accepted"===t.status?"#a2e0a4":"rejected"===t.status?"#f66c00":"#b7b5b3")),e.xp6(2),e.Oqu(t.attendee.user.name)}}function Ot(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"button",2),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw();return e.KtG(r.updateBusinessRound(s.id,"accepted"))}),e._uU(2," Aceptar "),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw();return e.KtG(r.updateBusinessRound(s.id,"rejected"))}),e._uU(4," Rechazar "),e.qZA()()}}const Ft=function(){return[]};function Qt(o,n){if(1&o&&(e.TgZ(0,"div",6)(1,"div",7),e._uU(2),e.qZA(),e.TgZ(3,"div",8)(4,"p",9),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"p",9),e._uU(8),e.qZA(),e.TgZ(9,"p",9),e._uU(10),e.qZA(),e.TgZ(11,"p",9),e._uU(12," asistentes "),e.qZA(),e.YNc(13,wt,3,5,"mat-chip",10),e.qZA(),e.TgZ(14,"div",11),e.YNc(15,Ot,5,0,"div",12),e.qZA()()),2&o){const t=n.$implicit,i=e.oxw();e.xp6(2),e.hij(" ",t.event.name," "),e.xp6(3),e.lnq(" ",e.xi3(6,8,t.date,"dd/MM/yyyy")," - ",t.init_time," a ",t.end_time," "),e.xp6(3),e.hij(" Mesa: ",t.name_table," "),e.xp6(2),e.hij(" zona: ",t.zone.zone_name," "),e.xp6(3),e.Q6J("ngForOf",t.attendee_schedules||e.DdM(11,Ft)),e.xp6(2),e.Q6J("ngIf",i.validateActions(t))}}class W{constructor(n,t){this.queryService=n,this.ls=t,this.businessRounds=[],this.attendeeId=0}ngOnInit(){this.getBusinessRounds(),this.attendeeId=this.ls.getItem("attendeeId")}getBusinessRounds(){this.queryService.getBusinessRounds().subscribe({next:n=>{console.log(n),this.businessRounds=n.data||[]},error:n=>{console.error(n)}})}getBusinessRoundsAccepted(){}validateActions(n){const i=(n.attendee_schedules||[]).find(s=>s.attendee_id===this.attendeeId);return!(!i||"pending"!==i.status)}updateBusinessRound(n,t){this.queryService.updateBusinessRound({status:t},n).subscribe({next:i=>{console.log(i),this.getBusinessRounds()},error:i=>{console.error(i)}})}}W.\u0275fac=function(n){return new(n||W)(e.Y36(F),e.Y36(Et.n))},W.\u0275cmp=e.Xpm({type:W,selectors:[["app-business-rounds"]],decls:9,vars:1,consts:[[1,"p-2"],["role","group","aria-label","Basic example",1,"btn-group"],[1,"btn","btn-primary",3,"click"],[1,"row"],[1,"col-12"],["class","card mt-2",4,"ngFor","ngForOf"],[1,"card","mt-2"],[1,"card-header"],[1,"card-body"],[1,"card-text","m-0"],["class","mb-1 me-1",3,"style",4,"ngFor","ngForOf"],[1,"card-footer"],["class","btn-group","role","group","aria-label","Basic example",4,"ngIf"],[1,"mb-1","me-1"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.getBusinessRounds()}),e._uU(3," Pendientes "),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.getBusinessRoundsAccepted()}),e._uU(5," Aceptadas "),e.qZA()(),e.TgZ(6,"div",3)(7,"div",4),e.YNc(8,Qt,16,12,"div",5),e.qZA()()()),2&n&&(e.xp6(8),e.Q6J("ngForOf",t.businessRounds))},dependencies:[w.sg,w.O5,H.HS,w.uU]});const It=[{path:"",component:Y,children:[{path:"events",component:$},{path:"matches",component:z},{path:"business-rounds",component:W}]}];class B{}B.\u0275fac=function(n){return new(n||B)},B.\u0275mod=e.oAB({type:B}),B.\u0275inj=e.cJS({imports:[te.Bz.forChild(It),te.Bz]});var Nt=v(2116);class V{}V.\u0275fac=function(n){return new(n||V)},V.\u0275mod=e.oAB({type:V}),V.\u0275inj=e.cJS({imports:[w.ez,R.u5,R.UX,B,Nt.q,gt,ce.xu,xe.g0,Ee.ot,ne.SJ,le.Ps,Re.ie]})}}]);